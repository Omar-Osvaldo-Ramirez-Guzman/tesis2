<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"/>
  <title>VozCheck - Detector de Voz IA vs Real</title>
  <meta name="description" content="Detector avanzado de voces generadas por IA usando análisis de frecuencias y machine learning">
  <meta name="keywords" content="detector voz IA, análisis frecuencias, MFCC, jitter, shimmer, voz sintética">
  
  <!-- Preconnect para optimización -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#00d4ff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="VozCheck">
  
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <nav>
      <div class="nav-brand">
        <h1>🔍 VozCheck</h1>
        <span class="nav-subtitle">Detector de Voz IA</span>
      </div>
      <ul id="navMenu">
        <li><a href="#auth" class="nav-link active">Acceso</a></li>
      </ul>
      <div class="options-menu" id="optionsMenu" style="display:none;">
        <button class="options-btn" onclick="toggleOptionsMenu()" aria-label="Menú de opciones">⚙️</button>
        <div class="options-dropdown" id="optionsDropdown">
          <a href="#" onclick="showProfile()" role="button">👤 Perfil</a>
          <a href="#" onclick="showSettings()" role="button">⚙️ Configuración</a>
          <a href="#" onclick="logout()" role="button">🚪 Cerrar Sesión</a>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <!-- Sección de Análisis Individual -->
    <section id="analisis" class="pantalla oculto">
      <div class="container">
        <div class="section-header">
          <h2>🎤 Análisis Individual de Voz</h2>
          <p class="section-description">Sube un archivo de audio o graba tu voz para detectar si es generada por IA usando análisis avanzado de frecuencias</p>
        </div>
        
        <div class="analysis-card">
          <div class="upload-section">
            <div class="upload-option">
              <input type="file" id="archivoAudio" accept=".mp3,.wav,.webm,.ogg" class="file-input" hidden>
              <label for="archivoAudio" class="upload-btn" role="button" tabindex="0">
                <span class="upload-icon">📁</span>
                <span class="upload-text">Seleccionar Archivo</span>
                <span class="upload-hint">MP3, WAV, WebM u OGG, máx 50MB</span>
              </label>
              <div class="file-status" id="archivoAudioStatus" role="status" aria-live="polite"></div>
            </div>
            
            <div class="divider">
              <span>o</span>
            </div>
            
            <div class="record-option">
              <button id="recordBtn" onclick="toggleRecording()" class="record-btn" aria-label="Grabar voz">
                <span class="record-icon">🎙️</span>
                <span class="record-text">Grabar Voz</span>
              </button>
              <div class="recording-timer" id="recordingTimer" style="display:none;" role="status" aria-live="polite">
                <span class="timer-icon">🔴</span>
                <span class="timer-text" id="timerText">00:00</span>
              </div>
            </div>
          </div>
          
          <div class="button-container">
            <button id="analyzeBtn" onclick="iniciarAnalisis()" class="analyze-btn" disabled aria-label="Analizar audio con IA">
              <span class="btn-icon">🔍</span>
              <span class="btn-text">Analizar Audio</span>
            </button>
          </div>
        </div>

        <!-- Resultados -->
        <div id="resultadoAnalisis" class="result-section" style="display:none;" role="region" aria-label="Resultados del análisis">
          <div class="result-header">
            <h3>📊 Resultado del Análisis</h3>
          </div>
          <div id="resultado" class="result-content" role="status" aria-live="polite"></div>
          
          <!-- Visualizaciones -->
          <div class="visualizations">
            <div class="viz-item">
              <h4>Forma de Onda</h4>
              <canvas id="waveformCanvas" width="600" height="150" aria-label="Gráfica de forma de onda del audio"></canvas>
            </div>
            <div class="viz-item">
              <h4>Espectro de Frecuencias</h4>
              <canvas id="spectrumCanvas" width="600" height="150" aria-label="Gráfica del espectro de frecuencias"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Sección de Acceso -->
    <section id="auth" class="pantalla">
      <div class="auth-container">
        <div class="auth-card">
          <div class="auth-header">
            <h1 class="auth-title">🔍 VozCheck</h1>
            <p class="auth-subtitle">Detector de Voz IA vs Real</p>
          </div>
          
          <form id="authForm" class="auth-form" novalidate>
            <div class="form-group">
              <label for="authEmail">Correo electrónico</label>
              <input type="email" id="authEmail" placeholder="Correo electrónico" required autocomplete="email">
            </div>
            <div class="form-group">
              <label for="authPassword">Contraseña</label>
              <input type="password" id="authPassword" placeholder="Contraseña" required autocomplete="current-password">
            </div>
            
            <div class="auth-buttons">
              <button type="button" onclick="loginEmail()" class="btn-primary">Iniciar Sesión</button>
              <button type="button" onclick="registerEmail()" class="btn-secondary">Registrarse</button>
            </div>
            
            <a href="#" onclick="showForgotPassword()" class="forgot-password-link">¿Olvidaste tu contraseña?</a>
            
            <div class="auth-divider">
              <span>o continúa con</span>
            </div>
            
            <div class="social-buttons">
              <button type="button" onclick="loginGoogle()" class="social-btn google" aria-label="Iniciar sesión con Google">
                <span class="social-icon">🔵</span>
                Google
              </button>
            </div>
          </form>
          
          <div id="authStatus" class="auth-status" role="status" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- Sección de Registro -->
    <section id="registro" class="pantalla oculto">
      <div class="auth-container">
        <div class="auth-card">
          <div class="auth-header">
            <h1 class="auth-title">📝 Registro</h1>
            <p class="auth-subtitle">Crea tu cuenta en VozCheck</p>
          </div>
          
          <form id="regForm" class="auth-form" novalidate>
            <div class="form-group">
              <label for="regEmail">Correo electrónico</label>
              <input type="email" id="regEmail" placeholder="Correo electrónico" required autocomplete="email">
            </div>
            <div class="form-group">
              <label for="regPassword">Contraseña</label>
              <input type="password" id="regPassword" placeholder="Contraseña (mín. 6 caracteres)" required autocomplete="new-password">
            </div>
            <div class="form-group">
              <label for="regConfirmPassword">Confirmar Contraseña</label>
              <input type="password" id="regConfirmPassword" placeholder="Confirmar contraseña" required autocomplete="new-password">
            </div>
            
            <div class="auth-buttons">
              <button type="button" onclick="processRegistration()" class="btn-primary">Crear Cuenta</button>
              <button type="button" onclick="backToLogin()" class="btn-secondary">Volver al Login</button>
            </div>
            
            <div class="auth-divider">
              <span>o regístrate con</span>
            </div>
            
            <div class="social-buttons">
              <button type="button" onclick="loginGoogle()" class="social-btn google" aria-label="Registrarse con Google">
                <span class="social-icon">🔵</span>
                Google
              </button>
            </div>
          </form>
          
          <div id="regStatus" class="auth-status" role="status" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- Sección de Perfil -->
    <section id="perfil" class="pantalla oculto">
      <div class="auth-container">
        <div class="profile-card">
          <div class="profile-header">
            <h2>👤 Perfil de Usuario</h2>
            <p>Completa tu información personal</p>
          </div>
          
          <form id="perfilForm" class="profile-form" novalidate>
            <div class="form-row">
              <div class="form-group">
                <label for="nombreCompleto">Nombre Completo *</label>
                <input type="text" id="nombreCompleto" required autocomplete="name">
              </div>
              <div class="form-group">
                <label for="correoUsuario">Correo Electrónico *</label>
                <input type="email" id="correoUsuario" readonly autocomplete="email">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="telefono">Teléfono</label>
                <div class="phone-input">
                  <input type="tel" id="telefono" placeholder="1234567890" maxlength="10" autocomplete="tel">
                  <span class="phone-counter" id="phoneCounter">0/10</span>
                </div>
              </div>
              <div class="form-group">
                <label for="tipoUsuario">Tipo de Usuario *</label>
                <select id="tipoUsuario" required>
                  <option value="">Selecciona una opción</option>
                  <option value="estudiante">Estudiante</option>
                  <option value="maestro">Maestro</option>
                  <option value="investigador">Investigador</option>
                  <option value="profesionista">Profesionista</option>
                  <option value="particular">Particular</option>
                </select>
              </div>
            </div>
            
            <div class="form-actions">
              <button type="button" onclick="guardarPerfil()" id="btnGuardarPerfil" class="btn-primary">
                Completar Perfil
              </button>
              <button type="button" onclick="editarPerfil()" id="btnEditarPerfil" class="btn-secondary" style="display:none;">
                Editar Perfil
              </button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Sección de Configuración -->
    <section id="configuracion" class="pantalla oculto">
      <div class="container">
        <div class="section-header">
          <h2>⚙️ Configuración</h2>
          <p class="section-description">Personaliza la apariencia y configuración de VozCheck</p>
        </div>

        <div class="config-grid">
          <div class="config-card">
            <h3>🎨 Apariencia</h3>
            <div class="config-item">
              <label for="themeSelector">Tema:</label>
              <select id="themeSelector" onchange="changeTheme()">
                <option value="dark">🌙 Oscuro</option>
                <option value="light">☀️ Claro</option>
              </select>
            </div>
          </div>

          <div class="config-card">
            <h3>🌍 Idioma</h3>
            <div class="config-item">
              <label for="languageSelector">Idioma:</label>
              <select id="languageSelector" onchange="changeLanguage()">
                <option value="es">🇪🇸 Español</option>
                <option value="en">🇺🇸 English</option>
              </select>
            </div>
          </div>
        </div>

        <div class="config-actions">
          <button onclick="saveConfiguration()" class="btn-primary">💾 Guardar</button>
          <button onclick="resetConfiguration()" class="btn-secondary">🔄 Restablecer</button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <p>&copy; 2025 VozCheck. Desarrollado por Oz - Análisis avanzado de frecuencias</p>
    </div>
  </footer>

  <script src="js/script.js"></script>
</body>
</html>
