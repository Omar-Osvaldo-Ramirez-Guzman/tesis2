<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"/>
  <title>VozCheck - Detector de Voz IA vs Real</title>
  <meta name="description" content="Detector avanzado de voces generadas por IA usando an√°lisis de frecuencias y machine learning">
  <meta name="keywords" content="detector voz IA, an√°lisis frecuencias, MFCC, jitter, shimmer, voz sint√©tica">
  
  <!-- Preconnect para optimizaci√≥n -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#00d4ff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="VozCheck">
  
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <nav>
      <div class="nav-brand">
        <h1>üîç VozCheck</h1>
        <span class="nav-subtitle">Detector de Voz IA</span>
      </div>
      <ul id="navMenu">
        <li><a href="#" onclick="showSection('auth')" class="nav-link active">Acceso</a></li>
      </ul>
      <div class="options-menu" id="optionsMenu" style="display:none;">
        <button class="options-btn" onclick="toggleOptionsMenu()" aria-label="Men√∫ de opciones">‚öôÔ∏è</button>
        <div class="options-dropdown" id="optionsDropdown">
          <a href="#" onclick="showProfile()" role="button">üë§ Perfil</a>
          <a href="#" onclick="showSettings()" role="button">‚öôÔ∏è Configuraci√≥n</a>
          <a href="#" onclick="logout()" role="button">üö™ Cerrar Sesi√≥n</a>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <!-- Secci√≥n de Acceso -->
    <section id="auth" class="pantalla">
      <div class="auth-container">
        <div class="auth-card">
          <div class="auth-header">
            <h1 class="auth-title">üîç VozCheck</h1>
            <p class="auth-subtitle">Detector de Voz IA vs Real</p>
          </div>
          
          <form id="authForm" class="auth-form" novalidate>
            <div class="form-group">
              <label for="authEmail">Correo electr√≥nico</label>
              <input type="email" id="authEmail" placeholder="tu@correo.com" required autocomplete="email">
            </div>
            <div class="form-group">
              <label for="authPassword">Contrase√±a</label>
              <input type="password" id="authPassword" placeholder="Tu contrase√±a" required autocomplete="current-password">
            </div>
            
            <div class="auth-buttons">
              <button type="button" onclick="loginEmail()" class="btn-primary">Iniciar Sesi√≥n</button>
              <button type="button" onclick="showRegister()" class="btn-secondary">Registrarse</button>
            </div>
            
            <a href="#" onclick="showForgotPassword()" class="forgot-password-link">¬øOlvidaste tu contrase√±a?</a>
            
            <div class="auth-divider">
              <span>o contin√∫a con</span>
            </div>
            
            <div class="social-buttons">
              <button type="button" onclick="loginGoogle()" class="social-btn google" aria-label="Iniciar sesi√≥n con Google">
                <span class="social-icon">üîµ</span>
                Google
              </button>
            </div>
          </form>
          
          <div id="authStatus" class="auth-status" role="status" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- Secci√≥n de Registro -->
    <section id="registro" class="pantalla oculto">
      <div class="auth-container">
        <div class="auth-card">
          <div class="auth-header">
            <h1 class="auth-title">üìù Registro</h1>
            <p class="auth-subtitle">Crea tu cuenta en VozCheck</p>
          </div>
          
          <form id="regForm" class="auth-form" novalidate>
            <div class="form-group">
              <label for="regEmail">Correo electr√≥nico</label>
              <input type="email" id="regEmail" placeholder="tu@correo.com" required autocomplete="email">
            </div>
            <div class="form-group">
              <label for="regPassword">Contrase√±a</label>
              <input type="password" id="regPassword" placeholder="M√≠nimo 6 caracteres" required autocomplete="new-password">
            </div>
            <div class="form-group">
              <label for="regConfirmPassword">Confirmar Contrase√±a</label>
              <input type="password" id="regConfirmPassword" placeholder="Confirma tu contrase√±a" required autocomplete="new-password">
            </div>
            
            <div class="auth-buttons">
              <button type="button" onclick="processRegistration()" class="btn-primary">Crear Cuenta</button>
              <button type="button" onclick="showSection('auth')" class="btn-secondary">Volver al Login</button>
            </div>
            
            <div class="auth-divider">
              <span>o reg√≠strate con</span>
            </div>
            
            <div class="social-buttons">
              <button type="button" onclick="loginGoogle()" class="social-btn google" aria-label="Registrarse con Google">
                <span class="social-icon">üîµ</span>
                Google
              </button>
            </div>
          </form>
          
          <div id="regStatus" class="auth-status" role="status" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- Secci√≥n de Perfil -->
    <section id="perfil" class="pantalla oculto">
      <div class="auth-container">
        <div class="profile-card">
          <div class="profile-header">
            <h2>üë§ Perfil de Usuario</h2>
            <p>Completa tu informaci√≥n personal</p>
          </div>
          
          <form id="perfilForm" class="profile-form" novalidate>
            <div class="form-row">
              <div class="form-group">
                <label for="nombreCompleto">Nombre Completo *</label>
                <input type="text" id="nombreCompleto" required autocomplete="name">
              </div>
              <div class="form-group">
                <label for="correoUsuario">Correo Electr√≥nico *</label>
                <input type="email" id="correoUsuario" readonly autocomplete="email">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="telefono">Tel√©fono</label>
                <div class="phone-input">
                  <input type="tel" id="telefono" placeholder="1234567890" maxlength="10" autocomplete="tel">
                  <span class="phone-counter" id="phoneCounter">0/10</span>
                </div>
              </div>
              <div class="form-group">
                <label for="tipoUsuario">Tipo de Usuario *</label>
                <select id="tipoUsuario" required>
                  <option value="">Selecciona una opci√≥n</option>
                  <option value="estudiante">Estudiante</option>
                  <option value="maestro">Maestro</option>
                  <option value="investigador">Investigador</option>
                  <option value="profesionista">Profesionista</option>
                  <option value="particular">Particular</option>
                </select>
              </div>
            </div>
            
            <div class="form-actions">
              <button type="button" onclick="guardarPerfil()" id="btnGuardarPerfil" class="btn-primary">
                Completar Perfil
              </button>
              <button type="button" onclick="editarPerfil()" id="btnEditarPerfil" class="btn-secondary" style="display:none;">
                Editar Perfil
              </button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Secci√≥n de An√°lisis Individual -->
    <section id="analisis" class="pantalla oculto">
      <div class="container">
        <div class="section-header">
          <h2>üé§ An√°lisis Individual de Voz</h2>
          <p class="section-description">Sube un archivo de audio o graba tu voz para detectar si es generada por IA usando an√°lisis avanzado de frecuencias</p>
        </div>
        
        <div class="analysis-card">
          <div class="upload-section">
            <div class="upload-option">
              <input type="file" id="archivoAudio" accept=".mp3,.wav,.webm,.ogg" class="file-input" hidden>
              <label for="archivoAudio" class="upload-btn" role="button" tabindex="0">
                <span class="upload-icon">üìÅ</span>
                <span class="upload-text">Seleccionar Archivo</span>
                <span class="upload-hint">MP3, WAV, WebM u OGG, m√°x 50MB</span>
              </label>
              <div class="file-status" id="archivoAudioStatus" role="status" aria-live="polite"></div>
            </div>
            
            <div class="divider">
              <span>o</span>
            </div>
            
            <div class="record-option">
              <button id="recordBtn" onclick="toggleRecording()" class="record-btn" aria-label="Grabar voz">
                <span class="record-icon">üéôÔ∏è</span>
                <span class="record-text">Grabar Voz</span>
              </button>
              <div class="recording-timer" id="recordingTimer" style="display:none;" role="status" aria-live="polite">
                <span class="timer-icon">üî¥</span>
                <span class="timer-text" id="timerText">00:00</span>
              </div>
            </div>
          </div>
          
          <div class="button-container">
            <button id="analyzeBtn" onclick="iniciarAnalisis()" class="analyze-btn" disabled aria-label="Analizar audio con IA">
              <span class="btn-icon">üîç</span>
              <span class="btn-text">Analizar Audio</span>
            </button>
          </div>
        </div>

        <!-- Resultados -->
        <div id="resultadoAnalisis" class="result-section" style="display:none;" role="region" aria-label="Resultados del an√°lisis">
          <div class="result-header">
            <h3>üìä Resultado del An√°lisis</h3>
          </div>
          <div id="resultado" class="result-content" role="status" aria-live="polite"></div>
          
          <!-- Visualizaciones -->
          <div class="visualizations">
            <div class="viz-item">
              <h4>Forma de Onda</h4>
              <canvas id="waveformCanvas" width="600" height="150" aria-label="Gr√°fica de forma de onda del audio"></canvas>
            </div>
            <div class="viz-item">
              <h4>Espectro de Frecuencias</h4>
              <canvas id="spectrumCanvas" width="600" height="150" aria-label="Gr√°fica del espectro de frecuencias"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Secci√≥n de Comparaci√≥n -->
    <section id="comparacion" class="pantalla oculto">
      <div class="container">
        <div class="section-header">
          <h2>üÜö Comparaci√≥n de Voces</h2>
          <p class="section-description">Compara dos archivos de audio para identificar cu√°l es real y cu√°l es IA usando an√°lisis avanzado</p>
        </div>

        <div class="comparison-card">
          <div class="comparison-uploads">
            <div class="upload-slot">
              <input type="file" id="archivo1" accept=".mp3,.wav,.webm,.ogg" class="file-input" hidden>
              <label for="archivo1" class="upload-slot-btn" role="button" tabindex="0">
                <span class="slot-icon">üé§</span>
                <span class="slot-title">Archivo 1</span>
                <span class="slot-hint">Arrastra o selecciona</span>
              </label>
              <div class="file-status" id="archivo1Status" role="status" aria-live="polite"></div>
            </div>

            <div class="vs-divider">
              <span class="vs-text">VS</span>
            </div>

            <div class="upload-slot">
              <input type="file" id="archivo2" accept=".mp3,.wav,.webm,.ogg" class="file-input" hidden>
              <label for="archivo2" class="upload-slot-btn" role="button" tabindex="0">
                <span class="slot-icon">üé§</span>
                <span class="slot-title">Archivo 2</span>
                <span class="slot-hint">Arrastra o selecciona</span>
              </label>
              <div class="file-status" id="archivo2Status" role="status" aria-live="polite"></div>
            </div>
          </div>

          <div class="button-container">
            <button id="compareBtn" onclick="iniciarComparacion()" class="compare-btn" disabled aria-label="Comparar voces con an√°lisis avanzado">
              <span class="btn-icon">‚ö°</span>
              <span class="btn-text">Comparar Voces</span>
            </button>
          </div>
        </div>

        <!-- Resultados de Comparaci√≥n -->
        <div id="resultadoComparacion" class="comparison-results" style="display:none;" role="region" aria-label="Resultados de la comparaci√≥n">
          <div class="detection-results">
            <div class="detection-card" id="detection1">
              <div class="detection-header">
                <span class="file-name" id="fileName1">Archivo 1</span>
              </div>
              <div class="detection-result" id="result1" role="status" aria-live="polite">Analizando...</div>
              <div class="confidence-meter" role="progressbar" aria-label="Medidor de confianza archivo 1">
                <div class="confidence-bar">
                  <div class="confidence-fill" id="confidence1"></div>
                </div>
                <span class="confidence-text" id="confidenceText1">0%</span>
              </div>
            </div>

            <div class="detection-card" id="detection2">
              <div class="detection-header">
                <span class="file-name" id="fileName2">Archivo 2</span>
              </div>
              <div class="detection-result" id="result2" role="status" aria-live="polite">Analizando...</div>
              <div class="confidence-meter" role="progressbar" aria-label="Medidor de confianza archivo 2">
                <div class="confidence-bar">
                  <div class="confidence-fill" id="confidence2"></div>
                </div>
                <span class="confidence-text" id="confidenceText2">0%</span>
              </div>
            </div>
          </div>

          <div class="final-verdict" id="finalVerdict">
            <h3>üéØ Veredicto Final</h3>
            <div id="finalResult" class="verdict-content" role="status" aria-live="polite">Procesando...</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Secci√≥n de Entrenamiento -->
    <section id="entrenamiento" class="pantalla oculto">
      <div class="container">
        <div class="section-header">
          <h2>üß† Entrenamiento del Modelo</h2>
          <p class="section-description">Ayuda a mejorar la precisi√≥n grabando muestras de voz real para el an√°lisis de frecuencias</p>
        </div>

        <div class="training-card">
          <div class="pangram-selector">
            <h3>üìù Selecciona un Texto para Leer</h3>
            <div class="pangram-tabs" role="tablist">
              <button class="tab-btn active" onclick="showPangramCategory('cortos')" role="tab" aria-selected="true" aria-controls="cortos">Cortos</button>
              <button class="tab-btn" onclick="showPangramCategory('medianos')" role="tab" aria-selected="false" aria-controls="medianos">Medianos</button>
              <button class="tab-btn" onclick="showPangramCategory('largos')" role="tab" aria-selected="false" aria-controls="largos">Largos</button>
            </div>
            
            <div class="pangram-list" id="pangramList">
              <!-- Pangramas Cortos -->
              <div class="pangram-category active" id="cortos" role="tabpanel" aria-labelledby="tab-cortos">
                <div class="pangram-item" data-pangram="Jovencillo emponzo√±ado con whisky: ¬°qu√© figurota exhibe!" role="button" tabindex="0">
                  "Jovencillo emponzo√±ado con whisky: ¬°qu√© figurota exhibe!"
                </div>
                <div class="pangram-item" data-pangram="Quiz√°s Jeff, mi viejo compa√±ero, pueda hablar con m√°s fluidez." role="button" tabindex="0">
                  "Quiz√°s Jeff, mi viejo compa√±ero, pueda hablar con m√°s fluidez."
                </div>
                <div class="pangram-item" data-pangram="Whisky bueno: ¬°excitad mi fr√°gil peque√±a vejez!" role="button" tabindex="0">
                  "Whisky bueno: ¬°excitad mi fr√°gil peque√±a vejez!"
                </div>
              </div>

              <!-- Pangramas Medianos -->
              <div class="pangram-category" id="medianos" role="tabpanel" aria-labelledby="tab-medianos">
                <div class="pangram-item" data-pangram="El ping√ºino Wenceslao hizo kil√≥metros bajo exhaustiva lluvia y fr√≠o, a√±oraba a su querido joven." role="button" tabindex="0">
                  "El ping√ºino Wenceslao hizo kil√≥metros bajo exhaustiva lluvia y fr√≠o, a√±oraba a su querido joven."
                </div>
                <div class="pangram-item" data-pangram="Benjamin pidi√≥ una bebida de kiwi y fresa; No√©, sin verg√ºenza, la m√°s exquisita champa√±a del men√∫." role="button" tabindex="0">
                  "Benjamin pidi√≥ una bebida de kiwi y fresa; No√©, sin verg√ºenza, la m√°s exquisita champa√±a del men√∫."
                </div>
              </div>

              <!-- Pangramas Largos -->
              <div class="pangram-category" id="largos" role="tabpanel" aria-labelledby="tab-largos">
                <div class="pangram-item" data-pangram="Tengo un libro de papiroflexia sobre las haza√±as y aventuras de Don Quijote de la Mancha en Kuwait, que explica con jerogl√≠ficos antiguos las t√©cnicas m√°s avanzadas." role="button" tabindex="0">
                  "Tengo un libro de papiroflexia sobre las haza√±as y aventuras de Don Quijote de la Mancha en Kuwait, que explica con jerogl√≠ficos antiguos las t√©cnicas m√°s avanzadas."
                </div>
              </div>
            </div>
          </div>

          <div class="selected-text" id="selectedText" style="display:none;">
            <h4>üìñ Texto Seleccionado:</h4>
            <p id="selectedPangram"></p>
          </div>

          <div class="training-controls">
            <div class="button-container">
              <button id="trainBtn" onclick="iniciarEntrenamiento()" class="train-btn" disabled aria-label="Iniciar grabaci√≥n de entrenamiento">
                <span class="btn-icon">üéôÔ∏è</span>
                <span class="btn-text">Iniciar Grabaci√≥n</span>
              </button>
            </div>
            
            <div class="training-timer" id="trainingTimer" style="display:none;" role="status" aria-live="polite">
              <div class="timer-circle">
                <span class="timer-value" id="trainingTime">00:00</span>
              </div>
              <button onclick="detenerEntrenamiento()" class="stop-btn" aria-label="Detener grabaci√≥n">
                <span class="btn-icon">‚èπÔ∏è</span>
                Detener
              </button>
            </div>
          </div>

          <div id="trainingStatus" class="training-status" role="status" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- Secci√≥n de Configuraci√≥n -->
    <section id="configuracion" class="pantalla oculto">
      <div class="container">
        <div class="section-header">
          <h2>‚öôÔ∏è Configuraci√≥n</h2>
          <p class="section-description">Personaliza la apariencia y configuraci√≥n de VozCheck</p>
        </div>

        <div class="config-grid">
          <div class="config-card">
            <h3>üé® Apariencia</h3>
            <div class="config-item">
              <label for="themeSelector">Tema:</label>
              <select id="themeSelector" onchange="changeTheme()">
                <option value="dark">üåô Oscuro</option>
                <option value="light">‚òÄÔ∏è Claro</option>
              </select>
            </div>
          </div>

          <div class="config-card">
            <h3>üåç Idioma</h3>
            <div class="config-item">
              <label for="languageSelector">Idioma:</label>
              <select id="languageSelector" onchange="changeLanguage()">
                <option value="es">üá™üá∏ Espa√±ol</option>
                <option value="en">üá∫üá∏ English</option>
              </select>
            </div>
          </div>
        </div>

        <div class="config-actions">
          <button onclick="saveConfiguration()" class="btn-primary">üíæ Guardar</button>
          <button onclick="resetConfiguration()" class="btn-secondary">üîÑ Restablecer</button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <p>&copy; 2025 VozCheck. Desarrollado por Oz - An√°lisis avanzado de frecuencias</p>
    </div>
  </footer>

  <script src="js/script.js"></script>
</body>
</html>
